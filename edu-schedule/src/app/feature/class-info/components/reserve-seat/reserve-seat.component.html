<div class="class-reserve">
  <div class="class-reserve__title">
    <h1>{{ isProfessor ? "All seats" : "Reserve your seat" }}</h1>
  </div>
  <div class="class-reserve-header">
    <div class="class-reserve__sub-title">
      <p>Classroom: {{ selectedClass?.classroom?.name! }}</p>
    </div>
    <div class="class-reserve__available-seats">
      <p>
        {{ selectedClass?.availableSeats! }} /
        {{ selectedClass?.classroom?.numberOfSeats! }}
      </p>
    </div>
  </div>
  <app-reserve-legend />
  <form [formGroup]="reserveSeatForm" (ngSubmit)="onSubmit($event)">
    <div class="class-reserve__wrapper">
      <div
        class="class-reserve__seats"
        *ngFor="let groupOfSeats of numberOfGroups"
      >
        <div
          class="seat"
          *ngFor="let seat of groupOfSeats"
          [class.available]="seat.status === 'available'"
          [class.selected]="seat.status === 'selected'"
          [class.reserved]="seat.status === 'reserved'"
          [class.this-user-reserved-seat]="
            seat.studentIndex === currentStudent?.index
          "
          [class.blocked]="isThisClassReservedByThisUser() || isProfessor"
          (click)="selectSeat(seat)"
        >
          <p>{{ seat.numberOfSeat }}</p>
        </div>
      </div>
    </div>
    <div class="class-reserve__stage--wrapper">
      <div class="class-reserve__stage">
        <div class="class-reserve__stage--table"></div>
        <div class="class-reserve__stage--stand"></div>
      </div>
    </div>
    <div class="class-reserve__button" *ngIf="!isProfessor">
      <button
        class="class-reserve__button--confirm"
        type="submit"
        value="confirm"
        *ngIf="!isThisClassReservedByThisUser()"
      >
        Confirm
      </button>
      <button
        class="class-reserve__button--cancel"
        type="submit"
        value="cancel"
        *ngIf="isThisClassReservedByThisUser()"
      >
        Cancel Your Seat
      </button>
    </div>
  </form>
</div>
